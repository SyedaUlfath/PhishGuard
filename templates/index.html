<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phishing URL Detector</title>
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/darkly/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark" style="background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px);">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="me-2">
                    <circle cx="12" cy="12" r="11" fill="url(#navGradient)" stroke="url(#navStroke)" stroke-width="2"/>
                    <path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" fill="white" opacity="0.9"/>
                    <defs>
                        <linearGradient id="navGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#0d6efd;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#6610f2;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="navStroke" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#20c997;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#0dcaf0;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                </svg>
                <span class="gradient-text fw-bold">PhishGuard</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active fw-semibold" href="{{ url_for('index') }}">
                            <i class="fas fa-home me-1"></i>Scanner
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-semibold" href="{{ url_for('history') }}">
                            <i class="fas fa-clock me-1"></i>History
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-semibold" href="{{ url_for('about') }}">
                            <i class="fas fa-info-circle me-1"></i>About
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="container mt-4">
        <!-- Hero Section -->
        <div class="row">
            <div class="col-lg-10 mx-auto text-center mb-5">
                <div class="hero-section position-relative">
                    <div class="hero-background"></div>
                    <div class="hero-content position-relative">
                        <div class="hero-icon mb-4">
                            <svg width="120" height="120" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="11" fill="url(#gradient1)" stroke="url(#gradient2)" stroke-width="2"/>
                                <path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" fill="white" opacity="0.9"/>
                                <defs>
                                    <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#0d6efd;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#6610f2;stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="gradient2" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#20c997;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#0dcaf0;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <h1 class="display-3 mb-4 hero-title">
                            <span class="gradient-text">PhishGuard</span>
                        </h1>
                        <p class="lead hero-subtitle mb-4">
                            Advanced AI-powered phishing detection that protects you from malicious URLs in real-time
                        </p>
                        <div class="hero-stats d-flex justify-content-center gap-4 mb-4">
                            <div class="stat-badge">
                                <i class="fas fa-brain text-primary"></i>
                                <span>AI Powered</span>
                            </div>
                            <div class="stat-badge">
                                <i class="fas fa-bolt text-warning"></i>
                                <span>Real-time</span>
                            </div>
                            <div class="stat-badge">
                                <i class="fas fa-shield-alt text-success"></i>
                                <span>Secure</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- URL Analysis Form -->
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="card modern-card shadow-lg">
                    <div class="card-header gradient-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-microscope me-2"></i>
                            URL Security Scanner
                        </h5>
                        <p class="card-subtitle mb-0 opacity-75">Enter any URL to check for phishing threats</p>
                    </div>
                    <div class="card-body">
                        <form id="urlAnalysisForm">
                            <div class="modern-input-group mb-3">
                                <div class="input-wrapper">
                                    <span class="input-icon">
                                        <i class="fas fa-globe"></i>
                                    </span>
                                    <input type="text" class="form-control modern-input" id="urlInput" 
                                           placeholder="Enter any URL to analyze (e.g., google.com, example.com/path/page.html)" 
                                           required>
                                    <button class="btn modern-btn" type="submit" id="analyzeBtn">
                                        <span class="spinner-border spinner-border-sm me-2 d-none" id="loadingSpinner"></span>
                                        <i class="fas fa-rocket me-1" id="searchIcon"></i>
                                        Scan Now
                                    </button>
                                </div>
                            </div>
                        </form>
                        
                        <!-- Error Alert -->
                        <div class="alert alert-danger d-none" id="errorAlert">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <span id="errorMessage"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analysis Results -->
        <div class="row mt-4">
            <div class="col-lg-10 mx-auto">
                <div id="resultsContainer" class="d-none">
                    <div class="card shadow">
                        <div class="card-header" id="resultHeader">
                            <h5 class="card-title mb-0" id="resultTitle"></h5>
                        </div>
                        <div class="card-body">
                            <!-- Quick Result Summary -->
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center">
                                        <div class="result-icon me-3" id="resultIcon"></div>
                                        <div>
                                            <h6 class="mb-1">Status</h6>
                                            <span class="badge fs-6" id="statusBadge"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex align-items-center">
                                        <div class="me-3">
                                            <i class="fas fa-chart-line fa-2x text-info"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1">Confidence</h6>
                                            <div class="progress" style="height: 20px;">
                                                <div class="progress-bar" id="confidenceBar"></div>
                                            </div>
                                            <small class="text-muted" id="confidenceText"></small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Recommendations -->
                            <div class="mb-4">
                                <h6 class="mb-3">
                                    <i class="fas fa-lightbulb me-2"></i>
                                    Recommendations
                                </h6>
                                <ul class="list-unstyled" id="recommendationsList"></ul>
                            </div>

                            <!-- Detailed Analysis -->
                            <div class="mb-4">
                                <h6 class="mb-3">
                                    <i class="fas fa-microscope me-2"></i>
                                    Detailed Analysis
                                </h6>
                                <div class="row" id="analysisDetails">
                                    <!-- Details will be populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Technical Details (Collapsible) -->
                            <div class="mb-3">
                                <button class="btn btn-outline-secondary btn-sm" type="button" 
                                        data-bs-toggle="collapse" data-bs-target="#technicalDetails">
                                    <i class="fas fa-code me-1"></i>
                                    Show Technical Details
                                </button>
                            </div>
                            <div class="collapse" id="technicalDetails">
                                <div class="card bg-dark">
                                    <div class="card-body">
                                        <pre><code id="technicalDetailsContent"></code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="row mt-5">
            <div class="col-lg-10 mx-auto">
                <div class="card modern-card">
                    <div class="card-header gradient-header-secondary">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-chart-line me-2"></i>
                            Security Analytics
                        </h5>
                        <p class="card-subtitle mb-0 opacity-75">Real-time threat detection metrics</p>
                    </div>
                    <div class="card-body">
                        <div class="row text-center" id="statsContainer">
                            <div class="col-md-3">
                                <div class="modern-stat-item">
                                    <div class="stat-icon bg-primary">
                                        <i class="fas fa-search"></i>
                                    </div>
                                    <h3 class="stat-number text-primary" id="totalAnalyses">0</h3>
                                    <p class="stat-label">Total Scans</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="modern-stat-item">
                                    <div class="stat-icon bg-danger">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                    <h3 class="stat-number text-danger" id="phishingDetected">0</h3>
                                    <p class="stat-label">Threats Blocked</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="modern-stat-item">
                                    <div class="stat-icon bg-success">
                                        <i class="fas fa-shield-check"></i>
                                    </div>
                                    <h3 class="stat-number text-success" id="safeUrls">0</h3>
                                    <p class="stat-label">Safe URLs</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="modern-stat-item">
                                    <div class="stat-icon bg-warning">
                                        <i class="fas fa-percentage"></i>
                                    </div>
                                    <h3 class="stat-number text-warning" id="phishingPercentage">0%</h3>
                                    <p class="stat-label">Threat Rate</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Analyses -->
        {% if recent_analyses %}
        <div class="row mt-5">
            <div class="col-lg-10 mx-auto">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-clock me-2"></i>
                            Recent Analyses
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>URL</th>
                                        <th>Status</th>
                                        <th>Confidence</th>
                                        <th>Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for analysis in recent_analyses %}
                                    <tr>
                                        <td class="text-truncate" style="max-width: 300px;">
                                            {{ analysis.url }}
                                        </td>
                                        <td>
                                            <span class="badge {% if analysis.is_phishing %}bg-danger{% else %}bg-success{% endif %}">
                                                {% if analysis.is_phishing %}PHISHING{% else %}SAFE{% endif %}
                                            </span>
                                        </td>
                                        <td>{{ "%.1f"|format(analysis.confidence_score * 100) }}%</td>
                                        <td>{{ analysis.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div class="text-center mt-3">
                            <a href="{{ url_for('history') }}" class="btn btn-outline-primary">
                                View Full History
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </main>

    <footer class="mt-5" style="background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px);">
        <div class="container text-center py-4">
            <div class="mb-3">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="11" fill="url(#footerGradient)" stroke="url(#footerStroke)" stroke-width="2"/>
                    <path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" fill="white" opacity="0.9"/>
                    <defs>
                        <linearGradient id="footerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#0d6efd;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#6610f2;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="footerStroke" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#20c997;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#0dcaf0;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <h6 class="gradient-text mb-2">PhishGuard</h6>
            <p class="mb-2 text-light">Advanced AI-powered phishing protection</p>
            <small class="text-muted">
                Protecting users from cyber threats with cutting-edge technology
            </small>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
